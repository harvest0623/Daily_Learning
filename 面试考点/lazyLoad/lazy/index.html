<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img{
            display: block;
            height: 200px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/OG4Cnt2SgXAuTj-Vv77ASGszUj1BwOhUXtBCplSlBfQmAAA/641" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/Os3eJ8u3SgB3Kd-zrRRhgfR5hUvdwcVPKUTNO6O7sZfUwAA/641" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/news_bt/OceYG4p3E6SGFqFBN500JOHSiO4recmt6S1_fml1rlgUEAA/641" alt="">
    <img src="" lazyload="true" data-origin="https://img1.baidu.com/it/u=2631091293,484496842&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500" alt="">
    <img src="" lazyload="true" data-origin="https://img2.baidu.com/it/u=3107839948,3570219976&fm=253&fmt=auto&app=138&f=JPEG?w=750&h=500" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/O98tXzU2bQgRJ5nRiiJQx_6uwzkB_rsF9e6TA7kcXr058AA/1000" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/Oz13eqQ6iXnUgh-eQxuXT8VmWvogpk66DvRM52Oe0QbNQAA/1000" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/Otvjht3x4wA58ZkSIxSo88NZTsyD6ZdUyiLMHZmGFoHokAA/641" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/news_bt/O7ZsQ9IrSfcWAWLPeaRcfeEt5FdyeTfnFYrSGmDSKlU0sAA/1000" alt="">
    <img src="" lazyload="true" data-origin="https://inews.gtimg.com/om_bt/O_2D2lSAfCS8o9_fGMsuNxOArO_rS1j9Nc2vsYaEaq2PwAA/641" alt="">
    <script>
        // 可视区域的高度
        const visibleHeight = window.innerHeight;
        // console.log(visibleHeight);

        // 懒加载函数
        function lazyLoad(){
            const imgs = document.querySelectorAll('img[lazyload]');
            // console.log(imgs);

            // 判断哪些 img 在可视区域内
            imgs.forEach(item => {
                console.log(123);
                const rect = item.getBoundingClientRect();
                if(rect.top < visibleHeight && rect.bottom >= 0){
                    item.src = item.dataset.origin;
                    item.removeAttribute('lazyload');
                }
            })
        }
        lazyLoad();
        // 监听滚动事件
        window.addEventListener('scroll', throttle(lazyLoad, 200));

        // 节流函数
        function throttle(fn, await){  // 在规定时间内只执行一次
            let preTime = Date.now();
            return () => {
                const nowTime = Date.now();
                if (nowTime - preTime >= await){
                    preTime = nowTime;
                    fn();
                }
            }
        }
    </script>
</body>
</html>