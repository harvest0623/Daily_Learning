<!-- 表单提交按钮 -->
<button id="submitBtn">提交订单</button>
<script>
    // 1. 真正要执行的核心业务逻辑（比如发请求提交订单）
    function submitOrder(e) {
        console.log('正在提交订单...', '事件对象：', e, '当前触发元素：', this);
        // 实际项目中这里会写：axios.post('/submit', 表单数据)
    }

    // 2. 获取按钮元素，给按钮绑定点击事件（注意：绑定的是防抖处理后的函数）
    const submitBtn = document.getElementById('submitBtn');
    // 第三个参数1000：防抖的等待时间（1秒），可根据需求调整
    submitBtn.addEventListener('click', debounce(submitOrder, 1000));

    // 3. 防抖核心函数（面试手写重点！）
    function debounce(fn, wait) {
        // 关键：闭包保存计时器ID，让每次触发都能访问到同一个timer
        let timer = null;

        // 返回一个“包装函数”，每次点击按钮实际触发的是这个函数
        return function(...args) {
        // 第一步：只要新触发了事件，就先清除之前的计时器（重置冷静期）
        // 比如第一次点击后，timer是1秒后执行的计时器；0.5秒后再点击，就把这个计时器清掉，重新算1秒
        clearTimeout(timer);

        // 第二步：重新设置计时器，等待wait时间后执行目标函数fn
        timer = setTimeout(() => {
            // 关键细节：用call改变fn的this指向，让它指向原触发元素（这里是按钮）
            // ...args：把事件对象e等参数传递给fn
            fn.call(this, ...args);
        }, wait);
        };
    }
</script>